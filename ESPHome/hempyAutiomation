alias: Gbox420 Hempy Bucket DISABLED Notification
description: Notify and manage persistent notification for Hempy bucket state changes
triggers:
  - entity_id:
      - sensor.hempy_bucket1_state
      - sensor.hempy_bucket2_state
    to: DISABLED
    trigger: state
  - entity_id:
      - sensor.hempy_bucket1_state
      - sensor.hempy_bucket2_state
    from: DISABLED
    trigger: state
conditions: []
actions:
  - choose:
      - conditions:
          - condition: state
            entity_id: sensor.hempy_bucket1_state
            state: DISABLED
        sequence:
          - data:
              message: Hempy bucket1 DISABLED
              title: Gbox420
            action: notify.mobile_app_YOUR_PHONE
          - data:
              message: Hempy bucket1 DISABLED
              title: Gbox420
              notification_id: hempy_bucket1_disabled
            action: persistent_notification.create
      - conditions:
          - condition: state
            entity_id: sensor.hempy_bucket2_state
            state: DISABLED
        sequence:
          - data:
              message: Hempy bucket2 DISABLED
              title: Gbox420
            action: notify.mobile_app_YOUR_PHONE
          - data:
              message: Hempy bucket2 DISABLED
              title: Gbox420
              notification_id: hempy_bucket2_disabled
            action: persistent_notification.create
      - conditions:
          - condition: not
            conditions:
              - condition: state
                entity_id: sensor.hempy_bucket1_state
                state: DISABLED
        sequence:
          - data:
              notification_id: hempy_bucket1_disabled
            action: persistent_notification.dismiss
      - conditions:
          - condition: not
            conditions:
              - condition: state
                entity_id: sensor.hempy_bucket2_state
                state: DISABLED
        sequence:
          - data:
              notification_id: hempy_bucket2_disabled
            action: persistent_notification.dismiss
mode: single
