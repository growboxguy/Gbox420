<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gbox: xStreamBufferCreate</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Gbox420.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Gbox
   &#160;<span id="projectnumber">4.20</span>
   </div>
   <div id="projectbrief">Grow box automation and monitoring</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__xStreamBufferCreate.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">xStreamBufferCreate</div>  </div>
</div><!--header-->
<div class="contents">
<p><a class="el" href="stream__buffer_8h.html">stream_buffer.h</a></p>
<div class="fragment"><div class="line"><a class="code" href="structStreamBufferDef__t.html">StreamBufferHandle_t</a> <a class="code" href="stream__buffer_8h.html#a39aa4dd8b83e2df7ded291f863fb5fed">xStreamBufferCreate</a>( <span class="keywordtype">size_t</span> xBufferSizeBytes, <span class="keywordtype">size_t</span> xTriggerLevelBytes );</div>
<div class="ttc" id="astream__buffer_8h_html_a39aa4dd8b83e2df7ded291f863fb5fed"><div class="ttname"><a href="stream__buffer_8h.html#a39aa4dd8b83e2df7ded291f863fb5fed">xStreamBufferCreate</a></div><div class="ttdeci">#define xStreamBufferCreate(xBufferSizeBytes, xTriggerLevelBytes)</div><div class="ttdef"><b>Definition:</b> <a href="stream__buffer_8h_source.html#l00157">stream_buffer.h:157</a></div></div>
<div class="ttc" id="astructStreamBufferDef__t_html"><div class="ttname"><a href="structStreamBufferDef__t.html">StreamBufferDef_t</a></div><div class="ttdef"><b>Definition:</b> <a href="stream__buffer_8c_source.html#l00225">stream_buffer.c:226</a></div></div>
</div><!-- fragment --><p>Creates a new stream buffer using dynamically allocated memory. See <a class="el" href="stream__buffer_8h.html#a3c248575ac1b83801db605b32a118f77">xStreamBufferCreateStatic()</a> for a version that uses statically allocated memory (memory that is allocated at compile time).</p>
<p>configSUPPORT_DYNAMIC_ALLOCATION must be set to 1 or left undefined in FreeRTOSConfig.h for <a class="el" href="stream__buffer_8h.html#a39aa4dd8b83e2df7ded291f863fb5fed">xStreamBufferCreate()</a> to be available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xBufferSizeBytes</td><td>The total number of bytes the stream buffer will be able to hold at any one time.</td></tr>
    <tr><td class="paramname">xTriggerLevelBytes</td><td>The number of bytes that must be in the stream buffer before a task that is blocked on the stream buffer to wait for data is moved out of the blocked state. For example, if a task is blocked on a read of an empty stream buffer that has a trigger level of 1 then the task will be unblocked when a single byte is written to the buffer or the task's block time expires. As another example, if a task is blocked on a read of an empty stream buffer that has a trigger level of 10 then the task will not be unblocked until the stream buffer contains at least 10 bytes or the task's block time expires. If a reading task's block time expires before the trigger level is reached then the task will still receive however many bytes are actually available. Setting a trigger level of 0 will result in a trigger level of 1 being used. It is not valid to specify a trigger level that is greater than the buffer size.</td></tr>
    <tr><td class="paramname">pxSendCompletedCallback</td><td>Callback invoked when number of bytes at least equal to trigger level is sent to the stream buffer. If the parameter is NULL, it will use the default implementation provided by sbSEND_COMPLETED macro. To enable the callback, configUSE_SB_COMPLETED_CALLBACK must be set to 1 in FreeRTOSConfig.h.</td></tr>
    <tr><td class="paramname">pxReceiveCompletedCallback</td><td>Callback invoked when more than zero bytes are read from a stream buffer. If the parameter is NULL, it will use the default implementation provided by sbRECEIVE_COMPLETED macro. To enable the callback, configUSE_SB_COMPLETED_CALLBACK must be set to 1 in FreeRTOSConfig.h.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If NULL is returned, then the stream buffer cannot be created because there is insufficient heap memory available for FreeRTOS to allocate the stream buffer data structures and storage area. A non-NULL value being returned indicates that the stream buffer has been created successfully - the returned value should be stored as the handle to the created stream buffer.</dd></dl>
<p>Example use: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> vAFunction( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line"><a class="code" href="structStreamBufferDef__t.html">StreamBufferHandle_t</a> xStreamBuffer;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> xStreamBufferSizeBytes = 100, xTriggerLevel = 10;</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// Create a stream buffer that can hold 100 bytes.  The memory used to hold</span></div>
<div class="line"> <span class="comment">// both the stream buffer structure and the data in the stream buffer is</span></div>
<div class="line"> <span class="comment">// allocated dynamically.</span></div>
<div class="line"> xStreamBuffer = <a class="code" href="stream__buffer_8h.html#a39aa4dd8b83e2df7ded291f863fb5fed">xStreamBufferCreate</a>( xStreamBufferSizeBytes, xTriggerLevel );</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span>( xStreamBuffer == <a class="code" href="ThirdParty_2GCC_2ARC__EM__HS_2portmacro_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"> {</div>
<div class="line">     <span class="comment">// There was not enough heap memory space available to create the</span></div>
<div class="line">     <span class="comment">// stream buffer.</span></div>
<div class="line"> }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line"> {</div>
<div class="line">     <span class="comment">// The stream buffer was created successfully and can now be used.</span></div>
<div class="line"> }</div>
<div class="line">}</div>
<div class="ttc" id="aThirdParty_2GCC_2ARC__EM__HS_2portmacro_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="ThirdParty_2GCC_2ARC__EM__HS_2portmacro_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="ThirdParty_2GCC_2ARC__EM__HS_2portmacro_8h_source.html#l00070">portmacro.h:70</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
