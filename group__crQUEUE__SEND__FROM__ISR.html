<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gbox: crQUEUE_SEND_FROM_ISR</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Gbox420.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Gbox
   &#160;<span id="projectnumber">4.20</span>
   </div>
   <div id="projectbrief">Grow box automation and monitoring</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__crQUEUE__SEND__FROM__ISR.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">crQUEUE_SEND_FROM_ISR</div>  </div>
</div><!--header-->
<div class="contents">
<p>croutine. h </p><div class="fragment"><div class="line"><a class="code" href="croutine_8h.html#ac8eb0a81c5cf69de7e4edd73ce44a3be">crQUEUE_SEND_FROM_ISR</a>(</div>
<div class="line">                         <a class="code" href="structQueueDefinition.html">QueueHandle_t</a> pxQueue,</div>
<div class="line">                         <span class="keywordtype">void</span> *pvItemToQueue,</div>
<div class="line">                         <a class="code" href="ARMv8M_2non__secure_2portmacrocommon_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xCoRoutinePreviouslyWoken</div>
<div class="line">                    )</div>
<div class="ttc" id="aARMv8M_2non__secure_2portmacrocommon_8h_html_a46fb21e00ae0729d7515c0fbf2269796"><div class="ttname"><a href="ARMv8M_2non__secure_2portmacrocommon_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a></div><div class="ttdeci">long BaseType_t</div><div class="ttdef"><b>Definition:</b> <a href="ARMv8M_2non__secure_2portmacrocommon_8h_source.html#l00074">portmacrocommon.h:74</a></div></div>
<div class="ttc" id="acroutine_8h_html_ac8eb0a81c5cf69de7e4edd73ce44a3be"><div class="ttname"><a href="croutine_8h.html#ac8eb0a81c5cf69de7e4edd73ce44a3be">crQUEUE_SEND_FROM_ISR</a></div><div class="ttdeci">#define crQUEUE_SEND_FROM_ISR(pxQueue, pvItemToQueue, xCoRoutinePreviouslyWoken)</div><div class="ttdef"><b>Definition:</b> <a href="croutine_8h_source.html#l00609">croutine.h:609</a></div></div>
<div class="ttc" id="astructQueueDefinition_html"><div class="ttname"><a href="structQueueDefinition.html">QueueDefinition</a></div><div class="ttdef"><b>Definition:</b> <a href="queue_8c_source.html#l00103">queue.c:104</a></div></div>
</div><!-- fragment --><p>The macro's <a class="el" href="croutine_8h.html#ac8eb0a81c5cf69de7e4edd73ce44a3be">crQUEUE_SEND_FROM_ISR()</a> and <a class="el" href="croutine_8h.html#a9c0fa977ca69adbddb4811affa2a71f7">crQUEUE_RECEIVE_FROM_ISR()</a> are the co-routine equivalent to the <a class="el" href="queue_8h.html#a21d5919ed26c21d121df4a4debeb643c">xQueueSendFromISR()</a> and <a class="el" href="queue_8h.html#acdf528f5c91131ae2f31c669cfd65758">xQueueReceiveFromISR()</a> functions used by tasks.</p>
<p><a class="el" href="croutine_8h.html#ac8eb0a81c5cf69de7e4edd73ce44a3be">crQUEUE_SEND_FROM_ISR()</a> and <a class="el" href="croutine_8h.html#a9c0fa977ca69adbddb4811affa2a71f7">crQUEUE_RECEIVE_FROM_ISR()</a> can only be used to pass data between a co-routine and and ISR, whereas <a class="el" href="queue_8h.html#a21d5919ed26c21d121df4a4debeb643c">xQueueSendFromISR()</a> and <a class="el" href="queue_8h.html#acdf528f5c91131ae2f31c669cfd65758">xQueueReceiveFromISR()</a> can only be used to pass data between a task and and ISR.</p>
<p>crQUEUE_SEND_FROM_ISR can only be called from an ISR to send data to a queue that is being used from within a co-routine.</p>
<p>See the co-routine section of the WEB documentation for information on passing data between tasks and co-routines and between ISR's and co-routines.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xQueue</td><td>The handle to the queue on which the item is to be posted.</td></tr>
    <tr><td class="paramname">pvItemToQueue</td><td>A pointer to the item that is to be placed on the queue. The size of the items the queue will hold was defined when the queue was created, so this many bytes will be copied from pvItemToQueue into the queue storage area.</td></tr>
    <tr><td class="paramname">xCoRoutinePreviouslyWoken</td><td>This is included so an ISR can post onto the same queue multiple times from a single interrupt. The first call should always pass in pdFALSE. Subsequent calls should pass in the value returned from the previous call.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pdTRUE if a co-routine was woken by posting onto the queue. This is used by the ISR to determine if a context switch may be required following the ISR.</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line"><span class="comment">// A co-routine that blocks on a queue waiting for characters to be received.</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> vReceivingCoRoutine( <a class="code" href="croutine_8h.html#a33b9d058688c92258155b5756d9936dd">CoRoutineHandle_t</a> xHandle, <a class="code" href="ARMv8M_2non__secure_2portmacrocommon_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxIndex )</div>
<div class="line">{</div>
<div class="line"><span class="keywordtype">char</span> cRxedChar;</div>
<div class="line"><a class="code" href="ARMv8M_2non__secure_2portmacrocommon_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xResult;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// All co-routines must start with a call to crSTART().</span></div>
<div class="line">  <a class="code" href="croutine_8h.html#a19a57a201a325e8af1207ed68c4aedde">crSTART</a>( xHandle );</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span>( ;; )</div>
<div class="line">  {</div>
<div class="line">      <span class="comment">// Wait for data to become available on the queue.  This assumes the</span></div>
<div class="line">      <span class="comment">// queue xCommsRxQueue has already been created!</span></div>
<div class="line">      <a class="code" href="croutine_8h.html#a586d57fd9a3e2aa5ae66484ed3be36c9">crQUEUE_RECEIVE</a>( xHandle, xCommsRxQueue, &amp;uxLEDToFlash, <a class="code" href="ARMv8M_2non__secure_2portmacrocommon_8h.html#a72723ba1e4a85ca14f25c2b9e066613d">portMAX_DELAY</a>, &amp;xResult );</div>
<div class="line"> </div>
<div class="line">      <span class="comment">// Was a character received?</span></div>
<div class="line">      <span class="keywordflow">if</span>( xResult == <a class="code" href="projdefs_8h.html#a07848d3078849bd32353c69d30a479b3">pdPASS</a> )</div>
<div class="line">      {</div>
<div class="line">          <span class="comment">// Process the character here.</span></div>
<div class="line">      }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// All co-routines must end with a call to crEND().</span></div>
<div class="line">  <a class="code" href="croutine_8h.html#ae6038cc976689b50000475ebfc4e2f23">crEND</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// An ISR that uses a queue to send characters received on a serial port to</span></div>
<div class="line"><span class="comment">// a co-routine.</span></div>
<div class="line"><span class="keywordtype">void</span> vUART_ISR( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line"><span class="keywordtype">char</span> cRxedChar;</div>
<div class="line"><a class="code" href="ARMv8M_2non__secure_2portmacrocommon_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xCRWokenByPost = <a class="code" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// We loop around reading characters until there are none left in the UART.</span></div>
<div class="line">  <span class="keywordflow">while</span>( UART_RX_REG_NOT_EMPTY() )</div>
<div class="line">  {</div>
<div class="line">      <span class="comment">// Obtain the character from the UART.</span></div>
<div class="line">      cRxedChar = UART_RX_REG;</div>
<div class="line"> </div>
<div class="line">      <span class="comment">// Post the character onto a queue.  xCRWokenByPost will be pdFALSE</span></div>
<div class="line">      <span class="comment">// the first time around the loop.  If the post causes a co-routine</span></div>
<div class="line">      <span class="comment">// to be woken (unblocked) then xCRWokenByPost will be set to pdTRUE.</span></div>
<div class="line">      <span class="comment">// In this manner we can ensure that if more than one co-routine is</span></div>
<div class="line">      <span class="comment">// blocked on the queue only one is woken by this ISR no matter how</span></div>
<div class="line">      <span class="comment">// many characters are posted to the queue.</span></div>
<div class="line">      xCRWokenByPost = <a class="code" href="croutine_8h.html#ac8eb0a81c5cf69de7e4edd73ce44a3be">crQUEUE_SEND_FROM_ISR</a>( xCommsRxQueue, &amp;cRxedChar, xCRWokenByPost );</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="aARMv8M_2non__secure_2portmacrocommon_8h_html_a646f89d4298e4f5afd522202b11cb2e6"><div class="ttname"><a href="ARMv8M_2non__secure_2portmacrocommon_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a></div><div class="ttdeci">unsigned long UBaseType_t</div><div class="ttdef"><b>Definition:</b> <a href="ARMv8M_2non__secure_2portmacrocommon_8h_source.html#l00075">portmacrocommon.h:75</a></div></div>
<div class="ttc" id="aARMv8M_2non__secure_2portmacrocommon_8h_html_a72723ba1e4a85ca14f25c2b9e066613d"><div class="ttname"><a href="ARMv8M_2non__secure_2portmacrocommon_8h.html#a72723ba1e4a85ca14f25c2b9e066613d">portMAX_DELAY</a></div><div class="ttdeci">#define portMAX_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="ARMv8M_2non__secure_2portmacrocommon_8h_source.html#l00079">portmacrocommon.h:79</a></div></div>
<div class="ttc" id="acroutine_8h_html_a19a57a201a325e8af1207ed68c4aedde"><div class="ttname"><a href="croutine_8h.html#a19a57a201a325e8af1207ed68c4aedde">crSTART</a></div><div class="ttdeci">#define crSTART(pxCRCB)</div><div class="ttdef"><b>Definition:</b> <a href="croutine_8h_source.html#l00214">croutine.h:214</a></div></div>
<div class="ttc" id="acroutine_8h_html_a33b9d058688c92258155b5756d9936dd"><div class="ttname"><a href="croutine_8h.html#a33b9d058688c92258155b5756d9936dd">CoRoutineHandle_t</a></div><div class="ttdeci">void * CoRoutineHandle_t</div><div class="ttdef"><b>Definition:</b> <a href="croutine_8h_source.html#l00047">croutine.h:47</a></div></div>
<div class="ttc" id="acroutine_8h_html_a586d57fd9a3e2aa5ae66484ed3be36c9"><div class="ttname"><a href="croutine_8h.html#a586d57fd9a3e2aa5ae66484ed3be36c9">crQUEUE_RECEIVE</a></div><div class="ttdeci">#define crQUEUE_RECEIVE(xHandle, pxQueue, pvBuffer, xTicksToWait, pxResult)</div><div class="ttdef"><b>Definition:</b> <a href="croutine_8h_source.html#l00498">croutine.h:498</a></div></div>
<div class="ttc" id="acroutine_8h_html_ae6038cc976689b50000475ebfc4e2f23"><div class="ttname"><a href="croutine_8h.html#ae6038cc976689b50000475ebfc4e2f23">crEND</a></div><div class="ttdeci">#define crEND()</div><div class="ttdef"><b>Definition:</b> <a href="croutine_8h_source.html#l00249">croutine.h:249</a></div></div>
<div class="ttc" id="aprojdefs_8h_html_a07848d3078849bd32353c69d30a479b3"><div class="ttname"><a href="projdefs_8h.html#a07848d3078849bd32353c69d30a479b3">pdPASS</a></div><div class="ttdeci">#define pdPASS</div><div class="ttdef"><b>Definition:</b> <a href="projdefs_8h_source.html#l00059">projdefs.h:59</a></div></div>
<div class="ttc" id="aprojdefs_8h_html_aa56260e937e7e203026707e5ba944273"><div class="ttname"><a href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a></div><div class="ttdeci">#define pdFALSE</div><div class="ttdef"><b>Definition:</b> <a href="projdefs_8h_source.html#l00052">projdefs.h:52</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
